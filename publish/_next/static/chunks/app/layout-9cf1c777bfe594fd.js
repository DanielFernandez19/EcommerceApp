(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2353:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_188709",variable:"__variable_188709"}},2488:(e,t,o)=>{"use strict";o.d(t,{AuthenticationProvider:()=>u,Z:()=>s});var n=o(5155),r=o(2115),l=o(5695);let i=(0,r.createContext)(void 0);function u(e){let{children:t}=e,[o,u]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),c=(0,l.useRouter)(),h=()=>{let e="; ".concat(document.cookie).split("; auth_token=");if(2===e.length){var t;return(null===(t=e.pop())||void 0===t?void 0:t.split(";").shift())||null}return null},d=()=>{let e="; ".concat(document.cookie).split("; auth_user=");if(2===e.length)try{var t;let o=null===(t=e.pop())||void 0===t?void 0:t.split(";").shift();if(o)return JSON.parse(decodeURIComponent(o))}catch(e){console.error("Error parsing auth_user cookie:",e)}return null};(0,r.useEffect)(()=>{(async()=>{try{if(h()){let e=d();e?u(e):(u(null),c.push("/Login"))}}catch(e){console.error("Error en inicializaci\xf3n:",e),u(null)}finally{a(!1)}})()},[]);let v=!!o,m=!!o&&[1,2].includes(o.idRole);return(0,n.jsx)(i.Provider,{value:{user:o,isAuthenticated:v,isAdmin:m,initializing:s,setUser:u,logout:()=>{document.cookie="auth_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="auth_user=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.removeItem("auth"),u(null),c.push("/Login")},refreshAuth:()=>{if(h()){let e=d();e?u(e):(u(null),c.push("/Login"))}else u(null)}},children:t})}function s(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuthContext must be used within an AuthenticationProvider");return e}},3752:(e,t,o)=>{Promise.resolve().then(o.t.bind(o,2353,23)),Promise.resolve().then(o.t.bind(o,7275,23)),Promise.resolve().then(o.t.bind(o,9324,23)),Promise.resolve().then(o.bind(o,2488))},5695:(e,t,o)=>{"use strict";var n=o(8999);o.o(n,"usePathname")&&o.d(t,{usePathname:function(){return n.usePathname}}),o.o(n,"useRouter")&&o.d(t,{useRouter:function(){return n.useRouter}})},7275:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[519,441,684,358],()=>t(3752)),_N_E=e.O()}]);
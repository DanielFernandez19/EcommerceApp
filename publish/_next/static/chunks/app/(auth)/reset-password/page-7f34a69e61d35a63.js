(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{208:(e,t,a)=>{Promise.resolve().then(a.bind(a,9690))},8316:(e,t,a)=>{"use strict";async function r(){try{let e=await fetch("".concat("http://localhost:5000/api","/products"));return e.ok?await e.json():[]}catch(e){return[]}}async function s(){try{let e=await fetch("".concat("http://localhost:5000/api","/order"));return e.ok?await e.json():[]}catch(e){return[]}}async function n(e){try{let t=await fetch("".concat("http://localhost:5000/api","/order/user/").concat(e));return t.ok?await t.json():[]}catch(e){return[]}}a.d(t,{DD:()=>m,Kv:()=>f,TK:()=>u,Us:()=>p,WF:()=>s,WY:()=>o,bW:()=>d,d$:()=>r,ht:()=>l,iG:()=>h,kg:()=>i,mq:()=>n,xw:()=>c});async function o(e){try{let t=await fetch("".concat("http://localhost:5000/api","/products"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok?await t.json():null}catch(e){return null}}async function i(e){try{return(await fetch("".concat("http://localhost:5000/api","/user/CreateUser"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok}catch(e){return!1}}async function l(e){try{let t=await fetch("".concat("http://localhost:5000/api","/user/GetAll"));if(!t.ok)return null;return(await t.json()).find(t=>t.email===e)}catch(e){return null}}async function c(e,t){try{return(await fetch("".concat("http://localhost:5000/api","/user/UpdatePass"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({Id:e,newPassword:t})})).ok}catch(e){return!1}}async function d(){try{let e=await fetch("".concat("http://localhost:5000/api","/Products/GetCategories"));return e.ok?await e.json():[]}catch(e){return[]}}async function u(e,t){try{return(await fetch("".concat("http://localhost:5000/api","/user/UpdateUser"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok}catch(e){return!1}}async function m(e){try{return(await fetch("".concat("http://localhost:5000/api","/products/").concat(e),{method:"DELETE"})).ok}catch(e){return!1}}async function h(e,t){try{let a=new FormData;a.append("file",t);let r=await fetch("".concat("http://localhost:5000/api","/products/").concat(e,"/images"),{method:"POST",body:a});return r.ok?await r.json():null}catch(e){return null}}async function p(e){try{return(await fetch("".concat("http://localhost:5000/api","/products/images/").concat(e),{method:"DELETE"})).ok}catch(e){return!1}}async function f(e,t){try{return(await fetch("".concat("http://localhost:5000/api","/order/").concat(e,"/status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok}catch(e){return!1}}},9690:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(5155),s=a(2115),n=a(5695),o=a(6874),i=a.n(o),l=a(8316),c=a(927);c.Ik({email:c.Yj().min(1,"El email es requerido").email("El email no es v\xe1lido").trim(),password:c.Yj().min(1,"La contrase\xf1a es requerida").trim()}),c.Ik({name:c.Yj().min(1,"El nombre es requerido").trim(),lastName:c.Yj().min(1,"El apellido es requerido").trim(),email:c.Yj().min(1,"El email es requerido").email("El email no es v\xe1lido").trim(),emailConfirmed:c.Yj().min(1,"Debes confirmar tu email").trim(),password:c.Yj().min(6,"La contrase\xf1a debe tener al menos 6 caracteres"),phoneNumber:c.Yj(),billingAddress:c.Yj(),billingAddress2:c.Yj(),postalCode:c.Yj(),idCountry:c.ai().min(1,"Debes seleccionar un pa\xeds").int("El pa\xeds debe ser un n\xfamero entero"),idProvince:c.ai().min(1,"Debes seleccionar una provincia").int("La provincia debe ser un n\xfamero entero"),idCity:c.ai().min(1,"Debes seleccionar una ciudad").int("La ciudad debe ser un n\xfamero entero"),idRole:c.ai().int()}).refine(e=>e.email===e.emailConfirmed,{message:"Los emails no coinciden",path:["emailConfirmed"]});let d=c.Ik({email:c.Yj().min(1,"El email es requerido").email("El email no es v\xe1lido").trim(),password:c.Yj().min(1,"La contrase\xf1a es requerida").min(6,"La contrase\xf1a debe tener al menos 6 caracteres"),confirmPassword:c.Yj().min(1,"Debes confirmar tu contrase\xf1a")}).refine(e=>e.password===e.confirmPassword,{message:"Las contrase\xf1as no coinciden",path:["confirmPassword"]});function u(){let[e,t]=(0,s.useState)("email"),[a,o]=(0,s.useState)(""),[c,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(""),[p,f]=(0,s.useState)(""),[x,y]=(0,s.useState)(!1),[g,b]=(0,s.useState)(null),[j,w]=(0,s.useState)(null),[v,N]=(0,s.useState)(null),[k,C]=(0,s.useState)(!1),E=(0,n.useRouter)(),L=e=>e&&""!==e.trim()?e.length<6?(w("La contrase\xf1a debe tener al menos 6 caracteres"),!1):(w(null),!0):(w("La contrase\xf1a es requerida"),!1),S=e=>e&&""!==e.trim()?e!==m?(N("Las contrase\xf1as no coinciden"),!1):(N(null),!0):(N("Debes confirmar tu contrase\xf1a"),!1);async function P(e){e.preventDefault(),y(!0),b(null);try{if(!a||!a.includes("@")){b("Por favor, ingresa un email v\xe1lido"),y(!1);return}let e=await (0,l.ht)(a);e&&e.id?(u(e.id),t("password")):b("Email no registrado")}catch(t){let e="Error desconocido";t&&"object"==typeof t?"message"in t&&"string"==typeof t.message?e=t.message:"body"in t&&t.body&&"object"==typeof t.body&&"message"in t.body&&(e=String(t.body.message)):"string"==typeof t&&(e=t),b(e)}finally{y(!1)}}async function T(e){e.preventDefault(),y(!0),b(null),w(null),N(null);let r=L(m),s=S(p);if(!r||!s){y(!1);return}try{let e=d.safeParse({email:a,password:m,confirmPassword:p});if(!e.success){e.error.errors.forEach(e=>{"password"===e.path[0]?w(e.message):"confirmPassword"===e.path[0]?N(e.message):b(e.message)}),y(!1);return}if(!c){b("Error: No se pudo identificar al usuario. Por favor, vuelve a ingresar tu email."),t("email"),y(!1);return}await (0,l.xw)(c,m)?(C(!0),setTimeout(()=>{E.push("/Login")},2e3)):b("No se pudo resetear la contrase\xf1a. Por favor, intenta nuevamente.")}catch(t){let e="Error desconocido";t&&"object"==typeof t?"message"in t&&"string"==typeof t.message?e=t.message:"body"in t&&t.body&&"object"==typeof t.body&&"message"in t.body&&(e=String(t.body.message)):"string"==typeof t&&(e=t),b(e)}finally{y(!1)}}return k?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:(0,r.jsx)("div",{className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"\xa1Contrase\xf1a actualizada!"}),(0,r.jsx)("p",{className:"text-gray-400 mb-6",children:"Tu contrase\xf1a ha sido cambiada exitosamente."}),(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"Redirigiendo al login..."})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-violet-600 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"email"===e?"Recuperar Contrase\xf1a":"Nueva Contrase\xf1a"}),(0,r.jsx)("p",{className:"text-gray-400",children:"email"===e?"Ingresa tu email para verificar tu cuenta":"Ingresa tu nueva contrase\xf1a"})]}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-8",children:"email"===e?(0,r.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",placeholder:"tu@email.com",value:a,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent transition-all",required:!0,disabled:x})]}),g&&(0,r.jsx)("div",{className:"bg-red-900/50 border border-red-700 text-red-300 p-3 rounded-lg text-sm",children:g}),(0,r.jsx)("button",{type:"submit",disabled:x,className:"w-full bg-violet-600 text-white font-medium py-3 rounded-lg hover:bg-violet-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:x?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verificando..."]}):"Verificar Email"})]}):(0,r.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nueva Contrase\xf1a"}),(0,r.jsx)("input",{type:"password",placeholder:"••••••",value:m,onChange:e=>{h(e.target.value),p&&S(p)},onBlur:e=>L(e.target.value),className:"w-full px-4 py-3 bg-gray-700 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent transition-all ".concat(j?"border-red-500":"border-gray-600"),required:!0,disabled:x,minLength:6}),j&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-400",children:j})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirmar Contrase\xf1a"}),(0,r.jsx)("input",{type:"password",placeholder:"••••••",value:p,onChange:e=>{f(e.target.value),S(e.target.value)},onBlur:e=>S(e.target.value),className:"w-full px-4 py-3 bg-gray-700 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent transition-all ".concat(v?"border-red-500":"border-gray-600"),required:!0,disabled:x,minLength:6}),v&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-400",children:v})]}),g&&(0,r.jsx)("div",{className:"bg-red-900/50 border border-red-700 text-red-300 p-3 rounded-lg text-sm",children:g}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{t("email"),b(null),h(""),f(""),w(null),N(null),u(null)},disabled:x,className:"flex-1 bg-gray-700 text-white font-medium py-3 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Volver"}),(0,r.jsx)("button",{type:"submit",disabled:x||!m||!p||m.length<6||m!==p,className:"flex-1 bg-violet-600 text-white font-medium py-3 rounded-lg hover:bg-violet-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:x?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cambiando..."]}):"Cambiar Contrase\xf1a"})]})]})}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:["\xbfRecordaste tu contrase\xf1a?"," ",(0,r.jsx)(i(),{href:"/Login",className:"text-violet-400 hover:text-violet-300 transition-colors",children:"Inicia sesi\xf3n aqu\xed"})]})})]})})}function m(){return(0,r.jsx)(u,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,561,441,684,358],()=>t(208)),_N_E=e.O()}]);
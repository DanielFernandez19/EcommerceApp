(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[624],{2564:(t,e,a)=>{Promise.resolve().then(a.bind(a,9397))},3990:(t,e,a)=>{"use strict";a.d(e,{A:()=>c});var r=a(5155),n=a(2115),o=a(8316);function c(t){var e,a,c,s,l;let{initialData:i,onSubmit:u,submitLabel:d}=t,[h,p]=(0,n.useState)({name:null!==(e=null==i?void 0:i.name)&&void 0!==e?e:"",description:null!==(a=null==i?void 0:i.description)&&void 0!==a?a:"",price:null!==(c=null==i?void 0:i.price)&&void 0!==c?c:0,stock:null!==(s=null==i?void 0:i.stock)&&void 0!==s?s:0,categoryId:null!==(l=null==i?void 0:i.categoryId)&&void 0!==l?l:1}),[y,m]=(0,n.useState)([]),[g,f]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{let t=await (0,o.bW)();m(t),(null==i?void 0:i.categoryId)||!(t.length>0)||p(e=>({...e,categoryId:t[0].id}))}catch(t){console.error("Error al cargar categor\xedas:",t)}finally{f(!1)}})()},[i]);let b=t=>{let{name:e,value:a}=t.target;p({...h,[e]:a})},x=async t=>{t.preventDefault(),await u({...h,price:Number(h.price),stock:Number(h.stock),categoryId:Number(h.categoryId),storeId:1})};return(0,r.jsxs)("form",{onSubmit:x,className:"bg-gray-800 border border-gray-700 rounded-xl p-6 space-y-5 max-w-xl",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-white",children:d}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm text-gray-400",children:"Nombre del producto"}),(0,r.jsx)("input",{name:"name",value:h.name,onChange:b,className:"w-full p-2 rounded bg-gray-900 text-white border border-gray-700",placeholder:"Ej: Remera oversize",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm text-gray-400",children:"Descripci\xf3n"}),(0,r.jsx)("textarea",{name:"description",value:h.description,onChange:b,className:"w-full p-2 rounded bg-gray-900 text-white border border-gray-700",placeholder:"Detalle del producto",rows:3})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm text-gray-400",children:"Precio"}),(0,r.jsx)("input",{type:"number",name:"price",value:h.price,onChange:b,className:"w-full p-2 rounded bg-gray-900 text-white border border-gray-700",placeholder:"Ej: 19999",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm text-gray-400",children:"Stock disponible"}),(0,r.jsx)("input",{type:"number",name:"stock",value:h.stock,onChange:b,className:"w-full p-2 rounded bg-gray-900 text-white border border-gray-700",placeholder:"Ej: 10",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm text-gray-400",children:"Categor\xeda"}),g?(0,r.jsx)("div",{className:"w-full p-2 rounded bg-gray-900 text-gray-400 border border-gray-700",children:"Cargando categor\xedas..."}):(0,r.jsx)("select",{name:"categoryId",value:h.categoryId,onChange:b,className:"w-full p-2 rounded bg-gray-900 text-white border border-gray-700 focus:outline-none focus:border-violet-500",required:!0,children:y.map(t=>(0,r.jsx)("option",{value:t.id,children:t.name},t.id))})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-violet-600 hover:bg-violet-700 text-white py-2 rounded-lg transition",children:d})]})}},5695:(t,e,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(e,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(e,{useRouter:function(){return r.useRouter}})},8316:(t,e,a)=>{"use strict";async function r(){try{let t=await fetch("".concat("http://localhost:5000/api","/products"));return t.ok?await t.json():[]}catch(t){return[]}}async function n(){try{let t=await fetch("".concat("http://localhost:5000/api","/order"));return t.ok?await t.json():[]}catch(t){return[]}}async function o(t){try{let e=await fetch("".concat("http://localhost:5000/api","/order/user/").concat(t));return e.ok?await e.json():[]}catch(t){return[]}}a.d(e,{DD:()=>h,Kv:()=>m,TK:()=>d,Us:()=>y,WF:()=>n,WY:()=>c,bW:()=>u,d$:()=>r,ht:()=>l,iG:()=>p,kg:()=>s,mq:()=>o,xw:()=>i});async function c(t){try{let e=await fetch("".concat("http://localhost:5000/api","/products"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return e.ok?await e.json():null}catch(t){return null}}async function s(t){try{return(await fetch("".concat("http://localhost:5000/api","/user/CreateUser"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok}catch(t){return!1}}async function l(t){try{let e=await fetch("".concat("http://localhost:5000/api","/user/GetAll"));if(!e.ok)return null;return(await e.json()).find(e=>e.email===t)}catch(t){return null}}async function i(t,e){try{return(await fetch("".concat("http://localhost:5000/api","/user/UpdatePass"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({Id:t,newPassword:e})})).ok}catch(t){return!1}}async function u(){try{let t=await fetch("".concat("http://localhost:5000/api","/Products/GetCategories"));return t.ok?await t.json():[]}catch(t){return[]}}async function d(t,e){try{return(await fetch("".concat("http://localhost:5000/api","/user/UpdateUser"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok}catch(t){return!1}}async function h(t){try{return(await fetch("".concat("http://localhost:5000/api","/products/").concat(t),{method:"DELETE"})).ok}catch(t){return!1}}async function p(t,e){try{let a=new FormData;a.append("file",e);let r=await fetch("".concat("http://localhost:5000/api","/products/").concat(t,"/images"),{method:"POST",body:a});return r.ok?await r.json():null}catch(t){return null}}async function y(t){try{return(await fetch("".concat("http://localhost:5000/api","/products/images/").concat(t),{method:"DELETE"})).ok}catch(t){return!1}}async function m(t,e){try{return(await fetch("".concat("http://localhost:5000/api","/order/").concat(t,"/status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})).ok}catch(t){return!1}}},9397:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>s});var r=a(5155),n=a(5695),o=a(3990),c=a(8316);function s(){let t=(0,n.useRouter)(),e=async e=>{await (0,c.WY)(e),t.push("/dashboard/abm/products")};return(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(o.A,{submitLabel:"Crear producto",onSubmit:e})})}}},t=>{var e=e=>t(t.s=e);t.O(0,[441,684,358],()=>e(2564)),_N_E=t.O()}]);